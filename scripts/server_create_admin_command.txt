docker compose exec -T web python manage.py shell << 'EOF'
import os
import django
os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'dice_game.settings')
django.setup()

from accounts.models import User
from django.contrib.auth import authenticate

username = 'muktesh'
password = 'muktesh123'
email = 'muktesh@example.com'

print("=" * 60)
print("Creating/Updating Admin User")
print("=" * 60)

# Check if user exists
user = User.objects.filter(username=username).first()

if user:
    print(f"User '{username}' exists. Updating...")
    user.set_password(password)
    user.is_superuser = True
    user.is_staff = True
    user.email = email
    user.is_active = True
    user.save()
    print("✅ User updated!")
else:
    print(f"User '{username}' not found. Creating...")
    user = User.objects.create_superuser(
        username=username,
        email=email,
        password=password
    )
    print("✅ User created!")

# Verify authentication
auth = authenticate(username=username, password=password)
if auth:
    print("\n✅ Authentication test: PASSED")
    print("\n" + "=" * 60)
    print("SUCCESS! Login credentials:")
    print("=" * 60)
    print(f"Username: {username}")
    print(f"Password: {password}")
    print(f"URL: http://159.198.46.36:8001/game-admin/login/")
    print("=" * 60)
else:
    print("\n❌ Authentication test: FAILED")
    print("Please check the password setting")
EOF

